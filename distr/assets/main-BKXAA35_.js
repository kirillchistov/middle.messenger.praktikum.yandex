(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const p="chat_saas_theme";function m(t){document.documentElement.setAttribute("data-theme",t);const o=document.getElementById("theme-toggle");o&&(o.textContent=t==="light"?"Ночь":"День")}function L(){const t=window.localStorage.getItem(p);return t==="light"||t==="dark"?t:"light"}function g(){const t=L();m(t);const e=document.getElementById("theme-toggle");e&&e.addEventListener("click",()=>{const a=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";window.localStorage.setItem(p,a),m(a)})}function h(){const t=document.getElementById("nav-toggle"),e=document.getElementById("nav-links");!t||!e||t.addEventListener("click",()=>{e.classList.toggle("landing-nav__links--open")})}document.addEventListener("DOMContentLoaded",()=>{g(),h()});function E(){const t=document.getElementById("chat-menu-toggle"),e=document.getElementById("chat-menu"),o=document.getElementById("user-modal"),a=document.getElementById("user-modal-backdrop"),n=document.getElementById("user-modal-title"),s=document.getElementById("user-modal-login"),c=document.getElementById("user-modal-submit");if(!t||!e)return;const d=r=>{!o||!a||!n||!s||!c||(r==="add"?(n.textContent="Добавить пользователя",c.textContent="Добавить в чат"):(n.textContent="Удалить пользователя",c.textContent="Удалить из чата"),s.value="ivanivanov",o.classList.add("chat-user-modal--open"),a.classList.add("chat-user-backdrop--open"),s.focus())},u=()=>{!o||!a||(o.classList.remove("chat-user-modal--open"),a.classList.remove("chat-user-backdrop--open"))};t.addEventListener("click",r=>{r.stopPropagation();const i=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!i)),e.classList.toggle("chat-thread__menu-dropdown--open",!i)}),e.addEventListener("click",r=>{r.stopPropagation();const l=r.target.dataset.action;l&&(e.classList.remove("chat-thread__menu-dropdown--open"),t.setAttribute("aria-expanded","false"),l==="add-user"?d("add"):l==="remove-user"&&d("remove"))}),document.addEventListener("click",r=>{if(!e.classList.contains("chat-thread__menu-dropdown--open"))return;r.target.closest(".chat-thread__menu")||(e.classList.remove("chat-thread__menu-dropdown--open"),t.setAttribute("aria-expanded","false"))}),a&&a.addEventListener("click",()=>{u()}),c&&c.addEventListener("click",()=>{u()}),o&&o.addEventListener("click",r=>{r.stopPropagation()}),document.addEventListener("click",r=>{if(!o?.classList.contains("chat-user-modal--open"))return;const i=r.target,l=i.closest("#user-modal"),f=i.id==="user-modal-backdrop";!l&&!f&&u()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&o?.classList.contains("chat-user-modal--open")&&u()})}function v(){const t=document.getElementById("attach-toggle"),e=document.getElementById("attach-menu"),o=document.getElementById("upload-modal"),a=document.getElementById("upload-backdrop");if(!t||!e||!o||!a)return;const n=()=>{o.classList.add("chat-upload-modal--open"),a.classList.add("chat-upload-backdrop--open")},s=()=>{o.classList.remove("chat-upload-modal--open"),a.classList.remove("chat-upload-backdrop--open")};t.addEventListener("click",c=>{c.stopPropagation();const d=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!d)),e.classList.toggle("chat-input__attach-menu--open",!d)}),e.addEventListener("click",c=>{c.target.matches(".chat-input__attach-item")&&(e.classList.remove("chat-input__attach-menu--open"),t.setAttribute("aria-expanded","false"),n())}),a.addEventListener("click",()=>{s()}),document.addEventListener("click",c=>{if(!e.classList.contains("chat-input__attach-menu--open"))return;c.target.closest(".chat-input__attach-wrapper")||(e.classList.remove("chat-input__attach-menu--open"),t.setAttribute("aria-expanded","false"))})}document.addEventListener("DOMContentLoaded",()=>{g(),h(),E(),v()});
